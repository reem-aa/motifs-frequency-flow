let mic,spectrum,fft,vol,waveDiamondShape,cloverShape,flowerShape,leafShape,starShape,rhombusShape,teardropShape,waveDiamondColor,cloverColor,flowerColor,leafColor,starColor,rhombusColor,teardropColor,bass,mid,treble,bassBoosted,midBoosted,trebleBoosted,time,bassThreshold,midThreshold,trebleThreshold,activeBass,activeMid,activeTreble,bassPulse,midPulse,treblePulse,bassFactor,midFactor,trebleFactor,started=!1;function preload(){waveDiamondShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNiN2YzOTE7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyNjIuOSw1MTEuOWMxMTIuMiwxMTIuMiw1MTEuOSwzNzUuNSw1MTEuOSwzNzUuNSwwLDAtMzk5LjYsMjYzLjMtNTExLjksMzc1LjUtMTEyLjIsMTEyLjItMzc1LjUsNTExLjktMzc1LjUsNTExLjksMCwwLTI2My4zLTM5OS42LTM3NS41LTUxMS45QzM5OS42LDExNTAuNiwwLDg4Ny40LDAsODg3LjQsMCw4ODcuNCwzOTkuNiw2MjQuMSw1MTEuOSw1MTEuOSw2MjQuMSwzOTkuNiw4ODcuNCwwLDg4Ny40LDBjMCwwLDI2My4zLDM5OS42LDM3NS41LDUxMS45WiIvPgogIDwvZz4KPC9zdmc+"),cloverShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNmMGNhZDc7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTEzMzEsODE2LjZjLTQ5LjcsMC05Ny41LDguMi0xNDIuMSwyMy4yLDg3LjQtODEsMTQyLjEtMTk2LjgsMTQyLjEtMzI1LjQsMC0yNDUtMTk4LjYtNDQzLjctNDQzLjctNDQzLjdzLTQ0My43LDE5OC42LTQ0My43LDQ0My43LDE0Mi4xLDMyNS40LDE0Mi4xLDMyNS40Yy00NC42LTE1LjEtOTIuNC0yMy4yLTE0Mi4xLTIzLjItMjQ1LDAtNDQzLjYsMTk4LjYtNDQzLjYsNDQzLjdzMTk4LjYsNDQzLjcsNDQzLjcsNDQzLjcsNDQzLjctMTk4LjYsNDQzLjctNDQzLjcsMC0xMC41LS4zLTE1LjdoLjZjLS4yLDUuMi0uMywxMC40LS4zLDE1LjcsMCwyNDUsMTk4LjYsNDQzLjcsNDQzLjcsNDQzLjdzNDQzLjctMTk4LjYsNDQzLjctNDQzLjctMTk4LjYtNDQzLjctNDQzLjctNDQzLjdoLS4xWiIvPgogIDwvZz4KPC9zdmc+"),flowerShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNmNGRlN2Y7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ0MC42LDY4NC44QzI2NC4zLDY4NC44LDEwNi43LDc2My41LDAsODg3LjRjMTA2LjcsMTIzLjgsMjY0LjMsMjAyLjUsNDQwLjYsMjAyLjVzMzMzLjktNzguNyw0NDAuNi0yMDIuNWMtMTA2LjctMTIzLjgtMjY0LjMtMjAyLjUtNDQwLjYtMjAyLjVoMFoiLz4KICAgIDxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMzM0LjIsNjg0LjhjLTE3Ni4zLDAtMzMzLjksNzguNy00NDAuNiwyMDIuNSwxMDYuNywxMjMuOCwyNjQuMywyMDIuNSw0NDAuNiwyMDIuNXMzMzMuOS03OC43LDQ0MC42LTIwMi41Yy0xMDYuNy0xMjMuOC0yNjQuMy0yMDIuNS00NDAuNi0yMDIuNWgwWiIvPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwODkuOSw0NDAuNmMwLTE3Ni4zLTc4LjctMzMzLjktMjAyLjUtNDQwLjYtMTIzLjgsMTA2LjctMjAyLjUsMjY0LjMtMjAyLjUsNDQwLjZzNzguNywzMzMuOSwyMDIuNSw0NDAuNmMxMjMuOC0xMDYuNywyMDIuNS0yNjQuMywyMDIuNS00NDAuNloiLz4KICAgIDxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDg5LjksMTMzNC4yYzAtMTc2LjMtNzguNy0zMzMuOS0yMDIuNS00NDAuNi0xMjMuOCwxMDYuNy0yMDIuNSwyNjQuMy0yMDIuNSw0NDAuNnM3OC43LDMzMy45LDIwMi41LDQ0MC42YzEyMy44LTEwNi43LDIwMi41LTI2NC4zLDIwMi41LTQ0MC42WiIvPgogIDwvZz4KPC9zdmc+"),leafShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNiOGQwOWU7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTkwMy43LDBjLTUuNCwyOTQuNS0yNDIuMyw1OTIuMy0yNDcuNyw4ODYuOC01LjUsMjk3LDIyMC41LDU5MC45LDIxNS4xLDg4Ny45Ii8+CiAgICA8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODcxLDE3NzQuN2M1LjQtMjk0LjUsMjQyLjMtNTkyLjMsMjQ3LjctODg2LjhDMTEyNC4yLDU5MC45LDg5OC4yLDI5Ny4xLDkwMy43LDAiLz4KICA8L2c+Cjwvc3ZnPg=="),starShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNiNjhlY2M7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSI4ODcuNCAxNzc0LjcgODg3LjIgMTc3NC42IDYyNy41IDE1MTQuOCAyNTkuOSAxNTE0LjggMjU5LjkgMTE0Ny4zIDAgODg3LjQgLjEgODg3LjIgMjU5LjkgNjI3LjUgMjU5LjkgMjU5LjkgNjI3LjUgMjU5LjkgODg3LjQgMCA4ODcuNSAuMSAxMTQ3LjMgMjU5LjkgMTUxNC44IDI1OS45IDE1MTQuOCA2MjcuNSAxNzc0LjcgODg3LjQgMTc3NC42IDg4Ny41IDE1MTQuOCAxMTQ3LjMgMTUxNC44IDE1MTQuOCAxMTQ3LjMgMTUxNC44IDg4Ny40IDE3NzQuNyIvPgogICAgPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNjAuMiAxNTE0LjUgNjI3LjYgMTUxNC41IDYyNy42IDE1MTQuNiA4ODcuNCAxNzc0LjMgMTE0Ny4xIDE1MTQuNSAxNTE0LjUgMTUxNC41IDE1MTQuNSAxMTQ3LjEgMTc3NC4zIDg4Ny40IDE1MTQuNSA2MjcuNiAxNTE0LjUgMjYwLjIgMTE0Ny4xIDI2MC4yIDg4Ny40IC40IDYyNy42IDI2MC4yIDI2MC4yIDI2MC4yIDI2MC4yIDYyNy42IDI2MC4yIDYyNy42IC40IDg4Ny40IDI2MC4yIDExNDcuMSAyNjAuMiAxNTE0LjUiLz4KICA8L2c+Cjwvc3ZnPg=="),rhombusShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNmZWI4OWY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSI4ODcuNCAxNzc0LjcgMTQzMS4zIDg4Ny40IDg4Ny40IDAgMzQzLjQgODg3LjQgODg3LjQgMTc3NC43Ii8+CiAgPC9nPgo8L3N2Zz4="),teardropShape=loadImage("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNzc0LjcgMTc3NC43Ij4KICA8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjkuMy4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogMi4xLjAgQnVpbGQgMTQ2KSAgLS0+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5zdDAgewogICAgICAgIGZpbGw6ICNmMzhlYTA7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJMYXllcl8xLTIiPgogICAgPHBhdGggY2xhc3M9InN0MCIgZD0iTTg4Ny40LDBzLTM4OS4zLDEzMjUuOC0zODkuMywxMzg1LjRjMCwyMTUsMTc0LjMsMzg5LjMsMzg5LjMsMzg5LjNzMzg5LjMtMTc0LjMsMzg5LjMtMzg5LjNDMTI3Ni43LDEzMjUuOSw4ODcuNCwwLDg4Ny40LDBaIi8+CiAgPC9nPgo8L3N2Zz4="),waveDiamondColor=color(102,153,102),starColor=color(204,0,102),cloverColor=color(204,0,102),rhombusColor=color(102,204,51),teardropColor=color(255,51,51),flowerColor=color(255,153,0),leafColor=color(102,153,102)}function setup(){createCanvas(800,600),setTimeout((()=>{startMic()}),100)}function draw(){if(!started)return background(50),void fill(255);background(255,255,255),spectrum=fft.analyze(),console.log("Spectrum Data:",spectrum),bass=fft.getEnergy("bass"),mid=fft.getEnergy("mid"),treble=fft.getEnergy("treble"),console.log("++++++Bass: ",bass," mid ",mid," treble ",treble),bassBoosted=map(bass,0,255,.1,1),midBoosted=map(mid,0,255,.1,1),trebleBoosted=map(treble,0,255,.1,1),time=millis()/1e3,bassThreshold=.271,midThreshold=.4,trebleThreshold=.189,activeBass=bassBoosted>bassThreshold?bassBoosted:0,activeMid=midBoosted>midThreshold?midBoosted:0,activeTreble=trebleBoosted>trebleThreshold?trebleBoosted:0,bassPulse=activeBass>0?map(activeBass,bassThreshold,255,.2,.8):1,midPulse=activeMid>0?map(activeMid,midThreshold,255,.3,1):1,treblePulse=activeTreble>0?map(activeTreble,trebleThreshold,255,.5,1.2):1,bassFactor=activeBass>0?1-bassPulse*abs(sin(2*time)):1,midFactor=activeMid>0?1-midPulse*abs(sin(6*time)):1,trebleFactor=activeTreble>0?1-treblePulse*abs(sin(8*time)):1;let g=waveDiamondShape.width/1.75*trebleFactor,o=waveDiamondShape.height/1.75*trebleFactor,e=width/2-g/2,M=height/2-o/2;waveDiamondColor=lerpColor(waveDiamondColor,color(255,255,255),trebleBoosted),tint(waveDiamondColor),image(waveDiamondShape,e,M,g,o),waveDiamondColor=color(102,153,102),g=waveDiamondShape.width,o=waveDiamondShape.height;let I=cloverShape.width/3*midFactor,i=[[-o/3,-o/3,82],[o/3,o/3,262],[-g/3,g/3,-262],[g/3,-g/3,-82]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),cloverColor=lerpColor(cloverColor,color(255,255,255),midBoosted),tint(cloverColor),image(cloverShape,-I/2,-I/2,I,I),pop(),cloverColor=color(204,0,102)}g=waveDiamondShape.width+cloverShape.width,o=waveDiamondShape.height+cloverShape.height;let l=flowerShape.width/2*bassFactor;i=[[0,-o/2,0],[o/2,0,0],[0,o/2,0],[-g/2,0,0]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),flowerColor=lerpColor(flowerColor,color(255,255,255),bassBoosted),tint(flowerColor),image(flowerShape,-l/2,-l/2,l,l),pop(),flowerColor=color(255,153,0)}g+=flowerShape.width,o+=flowerShape.height,leafSize=leafShape.width/2*bassFactor,i=[[g/8,-o/4,45],[g/4,-o/8,45],[g/4,o/8,-45],[g/8,o/4,-45],[-g/8,-o/4,-45],[-g/4,-o/8,-45],[-g/8,o/4,45],[-g/4,o/8,45]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),leafColor=lerpColor(leafColor,color(255,255,255),bassBoosted),tint(leafColor),image(leafShape,-leafSize/2,-leafSize/2,leafSize,leafSize),pop(),leafColor=color(102,153,102)}g+=leafShape.width,o+=leafShape.height;let t=starShape.width/3*trebleFactor;i=[[0,-o/7.5,0],[o/7.5,0,0],[0,o/7.5,0],[-g/7.5,0,0]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),starColor=lerpColor(starColor,color(255,255,255),trebleBoosted),tint(starColor),image(starShape,-t/2,-t/2,t,t),pop(),starColor=color(204,0,102)}let a=rhombusShape.width/3*midFactor;i=[[-o/7,-o/7,82],[o/7,o/7,262],[-g/7,g/7,-262],[g/7,-g/7,-82]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),rhombusColor=lerpColor(rhombusColor,color(255,255,255),midBoosted),tint(rhombusColor),image(rhombusShape,-a/2,-a/2,a,a),pop(),rhombusColor=color(102,204,51)}g+=rhombusShape.width,o+=rhombusShape.height,teardropSize=teardropShape.width/4*midFactor,i=[[g/22,-o/6.25,225],[g/6.25,-o/22,225],[g/6.25,o/22,-45],[g/22,o/6.25,-45],[-g/22,-o/6.25,-225],[-g/6.25,-o/22,-225],[-g/22,o/6.25,45],[-g/6.25,o/22,45]];for(let g of i){let[o,e,M]=g;push(),translate(width/2+o,height/2+e),rotate(radians(M)),teardropColor=lerpColor(teardropColor,color(255,255,255),midBoosted),tint(teardropColor),image(teardropShape,-teardropSize/2,-teardropSize/2,teardropSize,teardropSize),pop(),teardropColor=color(255,51,51)}console.log("Wave Diamond Color: ",waveDiamondColor),console.log("Star Color: ",starColor),console.log("Clover Color: ",cloverColor)}function startMic(){console.log("Lets us start the Mic"),mic=new p5.AudioIn,mic.start((()=>{console.log("Mic started"),started=!0})),mic.amp(3.5),fft=new p5.FFT(.8,1024),fft.setInput(mic)}